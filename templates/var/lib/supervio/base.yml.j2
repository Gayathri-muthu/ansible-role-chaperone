---
- Prepare:
  - "Datacenter Prep":
    - "Datacenter Info":
      - "vCenter Info":
        - id: vcenter_host
          name: "vCenter IP"
          optional: 0
          help: "IP address of vCenter"
        - id: vcenter_user
          name: "vCenter admin USERNAME"
          optional: 0
        - id: vcenter_password
          name: "vCenter admin PASSWORD"
          optional: 0
        - id: vcenter_port
          name: "vCenter Port"
          optional: 1
          help: "Port for authentication connection to vCenter default is 443"
        - id: ntp_svr
          name: "NTP server"
          optional: 0
          help: "NTP server for your network"
      - "Datacenter Name":
        - id: datacenter_name
          name: "Name of datacenter"
          optional: 0
          help: "Enter the name of the Datacenter being created ex: VIO-Datacenter"
      - "Managment Cluster":
        - id: vio_cluster_mgmt
          name: "Management cluster name"
          optional: 0
        - id: mgmt_esx_name
          name: "ESX hosts name"
          optional: 0
          help: "Mangament Cluster ESXi hostname"
        - id: mgmt_esx_ip
          name: "ESX hosts ip"
          optional: 0
          help: "Mangament Cluster ESXi IP address"
        - id: mgmt_esx_mac
          name: "ESX MAC address"
          optional: 0
          help: "Mangament Cluster ESXi MAC address"
        - id: mgmt_esx_name_a
          name: "ESX hosts name"
          optional: 0
          help: "Mangament Cluster ESXi hostname"
        - id: mgmt_esx_ip_a
          name: "ESX hosts ip"
          optional: 0
          help: "Mangament Cluster ESXi IP address"
        - id: mgmt_esx_mac_a
          name: "ESX MAC address"
          optional: 0
          help: "Mangament Cluster ESXi MAC address"
        - id: mgmt_esx_name_b
          name: "ESX hosts name"
          optional: 0
          help: "Mangament Cluster ESXi hostname"
        - id: mgmt_esx_ip_b
          name: "ESX hosts ip"
          optional: 0
          help: "Mangament Cluster ESXi IP address"
        - id: mgmt_esx_mac_b
          name: "ESX MAC address"
          optional: 0
          help: "Mangament Cluster ESXi MAC address"
      - "Edge Cluster":
        - id: vio_cluster_edge
          name: "Edge cluster name"
          optional: 0
        - id: edge_esx_name
          name: "ESX hosts name"
          optional: 0
          help: "Edge Cluster ESXi hostname"
        - id: edge_esx_ip
          name: "ESX hosts ip"
          optional: 0
          help: "Edge Cluster ESXi IP address"
        - id: edge_esx_mac
          name: "ESX MAC address"
          optional: 0
          help: "Edge Cluster ESXi MAC address"
        - id: edge_esx_name_a
          name: "ESX hosts name"
          optional: 0
          help: "Edge Cluster ESXi hostname"
        - id: edge_esx_ip_a
          name: "ESX hosts ip"
          optional: 0
          help: "Edge Cluster ESXi IP address"
        - id: edge_esx_mac_a
          name: "ESX MAC address"
          optional: 0
          help: "Edge Cluster ESXi MAC address"
      - "Compute Cluster":
        - id: vio_cluster_compute
          name: "Compute cluster name"
          optional: 0
        - id: compute_esx_name
          name: "ESX hosts name"
          optional: 0
          help: "Compute Cluster ESXi hostname"
        - id: compute_esx_ip
          name: "ESX hosts ip"
          optional: 0
          help: "Compute Cluster ESXi IP address"
        - id: compute_esx_mac
          name: "ESX MAC address"
          optional: 0
          help: "Compute Cluster ESXi MAC address"
        - id: compute_esx_name_a
          name: "ESX hosts name"
          optional: 0
          help: "Compute Cluster ESXi hostname"
        - id: compute_esx_ip_a
          name: "ESX hosts ip"
          optional: 0
          help: "Compute Cluster ESXi IP address"
        - id: compute_esx_mac_a
          name: "ESX MAC address"
          optional: 0
          help: "Compute Cluster ESXi MAC address"
        - id: compute_esx_name_b
          name: "ESX hosts name"
          optional: 0
          help: "Compute Cluster ESXi hostname"
        - id: compute_esx_ip_b
          name: "ESX hosts ip"
          optional: 0
          help: "Compute Cluster ESXi IP address"
        - id: compute_esx_mac_b
          name: "ESX MAC address"
          optional: 0
          help: "Compute Cluster ESXi MAC address"
          
    - AutoDeploy:
      - General:
        - id: win_url
          name: "win url"
          input: dropdown
          optional: 0
          help: "Enter URL for asset server"
          options:
            - id: 'http://172.16.0.53/VMware-ESXi-6.0.0-2494585-depot.zip'
            - id: 'http://192.168.1.53/VMware-ESXi-6.0.0-2494585-depot.zip'
        - id: win_path
          name: "win path"
          optional: 0
          help: "Local Full Directory Path on Windows Server for Software Depot Zip"
        - id: esxi_host_profile
          name: "ESXi Host Profile"
          optional: 0
          help: "Enter the ESXi Host Profile Name to Use"
        - id: esxi_img
          name: "ESX Image Profile Name"
          input: dropdown
          optional: 0
          help: "Select the ESX Image Profile Name to use"
          options:
            - id: 'ESXi-*-no-tools'
            - id: 'ESXi-*-standard'  
        
  - "Network Services":
    - "Boot Services":
      - DHCP:
        - id: dhcp_subnet
          name: "DHCP subnet"
          optional: 0
          help: "subnet for dhcp"
        - id: dhcp_sub_mask
          name: "DHCP subnet mask"
          optional: 0
          help: "subnet MASK for dhcp"
        - id: dhcp_rout
          name: "DHCP gateway"
          optional: 0
          help: "gateway for DHCP"
        - id: dom_name
          name: "Domain name"
          optional: 0
          help: "Domain name"
        - id: dom_name_svr
          name: "Domain name server"
          optional: 0
        - id: dhcp_range_a
          name: "DHCP START range"
          optional: 0
          help: "Start of dhcp allocation"
        - id: dhcp_range_b
          name: "DHCP END range"
          optional: 0
          help: "END of dhcp allocation"
        - id: boot_filename
          name: "ESXi boot img"
          input: dropdown
          optional: 0
          help: "Name of ESXi pxe boot img"
          options:
            - id: undionly.kpxe.vmw-hardwired
            
      - "TFTP Settings":
        - id: tftp_root
          name: "TFTP root"
          optional: 0
          help: "TFTP root directory for ESX boot imge."
        - id: tftp_ip
          name: "TFTP IP"
          optional: 0
          help: "TFTP Server IP to use"

  - "vDS and Port groups":
    - "vDS Settings":
      - "vDS Info":
        - id: vds_name
          name: "vDS Name"
          optional: 0
          input: dropdown
          help: "dvs"
          options:
            - id: VIO-VDS
        - id: uplinks
          name: "uplinks"
          optional: 0
          help: "Number of uplinks"
        - id: sw_ports
          name: "Switch Ports"
          optional: 0
          help: "Number of ports on the vDS"
        - id: productVersion
          name: "Product Version"
          optional: 0
          input: dropdown
          options:
            - id: '6.0.0'
            - id: '5.5.0'
            - id: '5.0.0'
        - id: port_binding
          name: "Port Binding"
          optional: 0
          input: dropdown
          help: "Port Binding Type"
          options:
            - id: 'static'
            - id: 'dynamic'
            - id: 'ephemeral'
        - id: ports
          name: "Port Group Ports "
          optional: 0
          help: "Number of Ports on individual port group"
    - "Port Group Names":
      - "Port Group Names":
        - id: api_grp
          name: "VIO API Network"
          optional: 0
          input: dropdown
          help: "VIO API Network"
          options:
            - id: 'VIO API Network'
        - id: ext_grp
          name: "VIO External Network"
          optional: 0
          input: dropdown
          help: "VIO External Network"
          options:
            - id: 'VIO External Network'
        - id: mgmt_grp
          name: "VIO Management"
          optional: 0
          input: dropdown
          help: "VIO Management"
          options:
            - id: 'VIO Management'
        - id: store_grp
          name: "VIO Storage"
          optional: 0
          input: dropdown
          help: "VIO Storage"
          options:
            - id: 'VIO Storage'
        - id: vmotion_grp
          name: "VIO vMotion"
          optional: 0
          input: dropdown
          help: "VIO vMotion"
          options:
            - id: 'VIO vMotion'
        
  - "NSX Services":
    - "NSX Options":
      - OVA:
        - id: nsx_dir
          name: "Temp Directory"
          optional: 0
          help: "Temp Directory for OVA"
          input: dropdown
          options:
            - id: '/tmp'
        - id: nsx_ova_http
          name: "NSX OVA upload"
          input: dropdown
          optional: 0
          help: "Upload OVA from asset server"
          options:
            - id: '/tmp/VMware-NSX-Manager-6.1.4-2691049.ova'
        - id: nsx_name
          name: "NSX Manager"
          optional: 0
          help: "nsx vm name"
        - id: nsx_datastore
          name: "NSX Datastore"
          optional: 0
          input: dropdown
          options:
            - id: ds-nfs-01a
        - id: cli_pass
          name: "NSX ssh passwd"
          optional: 0
          help: "NSX ssh root passwd"
        - id: ipprotocol
          name: "IP Protocol"
          optional: 0
          help: "Choose IP Protocol"
          input: dropdown
          options:
            - id: "IPv4"
            - id: "IPv6"
        - id: ipallocationpolicy
          name: "IP Allocation Policy"
          optional: 0
          help: "IP Allocation Policy"
          options:
            - id: dhcpPolicy
            - id: transsientPolicy
            - id: fixedPolicy

- Install:
  - AutoDeploy:
    - id: install_datacenter
      name: "Create vSphere Datacenter"
      commands:
        - "/opt/supervio/supervio_play site_dc.yml"
    - id: install_autodeploy
      name: "Configure Autodeploy"
      commands:
        - "/opt/supervio/supervio_play site_autodeploy.yml"
    - id: install_dhcp
      name: "Enable TFTP and DHCP Services"
      commands:
        - "/opt/supervio/supervio_play site_dhcpd.yml"

  - "NSX VIO":
    - id: nsx_ova_deploy
      name: "Deploy NSX OVA"
      commands:
        - "/opt/supervio/supervio_play site_nsx.yml"
    - id: install_nsx
      name: "Configure NSX Manager"
      commands:
        - "/opt/supervio/supervio_play site_nsx.yml"
    - id: install_vio
      name: "Deploy VIO OVA"
      commands:
        - "/opt/supervio/supervio_play site_vio.yml"
