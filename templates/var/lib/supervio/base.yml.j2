---
- Prepare:
  - "Management vCenter":
    - "Host Access":
      - "vCenter Host":
        - id: mgmt_vc
          name: "vCenter Hostname"
          default: "localhost"
          show: "name, optional"
          optional: 0
          help: "DNS Resolvable name or IP Address"
          options: mgmt_vc
      - Credentials:
        - id: mgmt_vc_username
          name: "User ID"
          default: "root"
          show: "name, optional"
          optional: 0
          help: "vCenter Administrator User"
          options: mgmt_vc_username
        - id: mgmt_vc_password
          name: "Password"
          show: "name, optional"
          optional: 0
          help: "vCenter Administrator User Password"
          options: mgmt_vc_password
    - Resources:
      - Datacenter:
        - id: mgmt_vc_datacenter
          name: "Virtual Datacenter"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "Datacenter in which to place OMS and Managment Servers"
          options: mgmt_vc_datacenter
        - id: mgmt_vc_cluster
          name: "vCenter Cluster"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "vCenter Cluster to use for OpenStack Management servers"
          options: mgmt_vc_cluster
        - id: mgmt_vc_hosts
          name: "Hosts"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "Hosts in Cluster?"
          options: mgmt_vc_hosts
      - Storage:
        - id: mgmt_vc_datastores
          name: "Datastores"
          show: "name, optional"
          optional: 0
          input: checkbox
          help: "Data stores to use for Nova Store"
          options: mgmt_vc_datastores
      - Network:
        - id: mgmt_vc_networks
          name: "Networks"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "Networks for Compute Instances"
          options: mgmt_vc_networks
  - "Compute vCenter":
    - "Host Access":
      - "vCenter Host":
        - id: comp_vc
          name: "vCenter Hostname"
          default: "localhost"
          show: "name, optional"
          optional: 0
          help: "DNS Resolvable name or IP Address"
          options: comp_vc
      - Credentials:
        - id: comp_vc_username
          name: "User ID"
          default: "root"
          show: "name, optional"
          optional: 0
          help: "vCenter Administrator User"
          options: comp_vc_username
        - id: comp_vc_password
          name: "Password"
          show: "name, optional"
          optional: 0
          help: "vCenter Administrator User Password"
          options: comp_vc_password
    - Resources:
      - Datacenter:
        - id: comp_vc_datacenter
          name: "Virtual Datacenter"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "Datacenter in which to place OMS and Managment Servers"
          options: comp_vc_datacenter
        - id: comp_vc_cluster
          name: "vCenter Cluster"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "vCenter Cluster to use for OpenStack Management servers"
          options: comp_vc_cluster
        - id: comp_vc_hosts
          name: "Hosts"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "Hosts in Cluster?"
          options: comp_vc_hosts
      - Storage:
        - id: comp_vc_datastores
          name: "Datastores"
          show: "name, optional"
          input: checkbox
          optional: 0
          input: dropdown
          help: "Data stores to use for Nova Store"
          options: comp_vc_datastores
      - Network:
        - id: comp_vc_networks
          name: "Networks"
          show: "name, optional"
          optional: 0
          input: dropdown
          help: "Networks for Compute Instances"
          options: comp_vc_networks
  - SDDC:
    - AutoDeploy:
      - General:
        - id: mem_size
          name: "VM Memory Size"
          optional: 0
          input: dropdown
          help: "RAM (MB) for AutoDeploy VM"
          options:
            - id: "12288"
              name: "12288 MB"
        - id: cli_pass
          name: "PowerCLI Password"
          optional: 0
          help: "Password to use for PowerCLI Commands"
      - "DHCP":
        - id: ipallocationpolicy
          name: "IP Allocation Policy"
          optional: 0
          input: dropdown
          help: "DHCP IP Allocation Policy"
          options:
            - id: dhcpPolicy
            - id: staticPolicy
        - id: ipprotocol
          name: "IP Protool"
          optional: 0
          input: dropdown
          help: "DHCP IP protocol to use."
          options:
            - id:  'IPv4'
            - id:  'IPv6'
        - id: dhcp_conf_dest
          name: "DHCP Configuration File"
          optional: 0
          help: "Where to generate the DHCP configuration."
          #'/etc/dhcp/dhcpd.conf'
      - "TFTP Settings":
        - id: boot_filename
          name: "Boot Image"
          optional: 0
          help: "Boot image file for ESXi hosts."
          #undionly.kpxe.vmw-hardwired
        - id: tftp_root
          name: "Root Directory"
          optional: 0
          help: "Root (Download) Directory"
          # /tftpboot
        - id: tftp_ip
          name: "IP Address"
          optional: 0
          help: "IP Address for ESXi boot images."
          # 172.16.0.251
        - id: tftp_zip
          name: "Temporary Directory"
          optional: 0
          help: "Directory in which to store TFTP zips."
          # '/opt/supervio-ansible/playbooks/supervio/tmp'
        - id: iptables_mods
          name: "IPTables Modules"
          optional: 0
          help: "IP Tables modules to load."
          # ip_conntrack_tftp
    - NSX:
      - General:
        - id: nsx_name
          name: 'NSX Manager'
          show: "name, optional"
          optional: 0
          help: "NXS Manager Name"
      - Placement:
        - id: nsx_datacenter
          name: "NSX Datacenter"
          input: dropdown
          optional: 0
          help: "Datacenter into which to deploy NSX"
          options: mgmt_vc_datacenter
        - id: nsx_cluster
          name: "Cluster"
          input: dropdown
          optional: 0
          help: "Cluster into which to deploy NSX"
          options: mgmt_vc_cluster
        - id: nsx_datastore
          name: 'Datastore'
          input: dropdown
          optional: 0
          help: "Datastore for the NSX Deployments"
          options: comp_vc_datastores
      - Network:
        - id: nsx_network
          name: "Management Network"
          input: dropdown
          optional: 0
          help: "Management Network for NSX Communications"
          options: comp_vc_networks
        - id: nsx_ntp
          name: "NTP Server"
          optional: 0
          help: "NTP Server for NSX Servers"
      - Appliance:
        - id: nsx_ova
          name: "NSX OVA"
          input: dropdown
          optional: 0
          help: "OVA to use to deploy NXS"
          options:
            - id: 'VMware-NSX-Manager-6.1.4-2691049.ova'
        - id: nsx_dir
          name: "Temp Directory"
          optional: 0
          help: "Temporary download (local) storage"

- SDDC:
  - Install:
    - id: install_datacenter
      name: "Create vSphere Datacenter"
      commands:
        - "/opt/supervio/supervio_play site_dc.yml"
    - id: install_autodeploy
      name: "Configure Autodeploy"
      commands:
        - "/opt/supervio/supervio_play site_autodeploy.yml"
    - id: install_dhcp
      name: "Enable TFTP and DHCP Services"
      commands:
        - "/opt/supervio/supervio_play site_dhcpd.yml"
    - id: nsx_ova_deploy
      name: "Deoploy NSX to vsphere Configure NSX manager"
      commands:
        - "/opt/supervio/supervio_play site_nsx.yml"
- VIO:
  - "Install NSX":
    - id: install_nsx
      name: "Install and Configure NSX Manager"
      commands:
        - "/opt/supervio/supervio_play site_nsx.yml"
    - id: install_vio
      name: "Deploy VIO"
      commands:
        - "/opt/supervio/supervio_play site_vio.yml"
